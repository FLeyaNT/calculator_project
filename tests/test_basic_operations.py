import pytest

from .fixtures.fixture_calculator import calculator


class TestCalculatorBasicOperations:
    
    @pytest.mark.parametrize(
        'expression, expected',
        [
            # Простое сложение
            ('2 + 3', '5'),
            ('10 + 5', '15'),
            ('0 + 0', '0'),
            ('-5 + 10', '5'),
            ('-5 + -5', '-10'),
            ('1.5 + 2.5', '4'),
            ('0.1 + 0.2', '0.3'),
            ('999 + 1', '1000'),
            
            # Большие числа
            ('1000000 + 2000000', '3000000'),
            ('999999999 + 1', '1000000000'),
            ('123456789 + 987654321', '1111111110'),
            ('1000000000 + 1000000000', '2000000000'),
            
            # Десятичные дроби
            ('0.001 + 0.002', '0.003'),
            ('1.23456 + 2.34567', '3.58023'),
            ('0.0000001 + 0.0000002', '0.0000003'),
            
            # Отрицательные числа
            ('-100 + 50', '-50'),
            ('-0.5 + 0.5', '0'),
            ('-999 + 1000', '1'),
        ]
    )
    def test_addition_comprehensive(self, calculator, expression, expected):
        result = calculator.calculate(expression)
        assert str(result) == expected

    @pytest.mark.parametrize(
        'expression, expected',
        [
            # Простое вычитание
            ('10 - 5', '5'),
            ('5 - 10', '-5'),
            ('0 - 5', '-5'),
            ('-5 - 5', '-10'),
            ('-5 - -5', '0'),
            ('5.5 - 2.2', '3.3'),
            ('1 - 0.9', '0.1'),
            
            # Большие числа
            ('1000000 - 500000', '500000'),
            ('999999999 - 999999998', '1'),
            ('1000000000 - 1', '999999999'),
            ('5000000000 - 3000000000', '2000000000'),
            
            # Десятичные дроби
            ('1.5 - 0.75', '0.75'),
            ('0.0001 - 0.00005', '0.00005'),
            ('100.12345 - 50.54321', '49.58024'),
            
            # Отрицательные числа
            ('-100 - 50', '-150'),
            ('0 - 1000000', '-1000000'),
            ('-0.001 - 0.001', '-0.002'),
        ]
    )
    def test_subtraction_comprehensive(self, calculator, expression, expected):
        result = calculator.calculate(expression)
        assert str(result) == expected

    @pytest.mark.parametrize(
        'expression, expected',
        [
            # Простое умножение
            ('5 * 4', '20'),
            ('-5 * 4', '-20'),
            ('-5 * -4', '20'),
            ('0 * 5', '0'),
            ('2.5 * 4', '10'),
            ('0.5 * 0.5', '0.25'),
            ('10 * 0.1', '1'),
            
            # Большие числа
            ('1000 * 1000', '1000000'),
            ('9999 * 9999', '99980001'),
            ('123456 * 789', '97406784'),
            ('1000000 * 0', '0'),
            ('999999999 * 1', '999999999'),
            ('1000000000 * 2', '2000000000'),
            
            # Умножение на десятичные дроби
            ('100 * 0.01', '1'),
            ('0.001 * 0.001', '0.000001'),
            ('123.456 * 7.89', '974.06784'),
            ('1000000 * 0.5', '500000'),
            
            # Граничные случаи
            ('1 * 1', '1'),
            ('-1 * -1', '1'),
            ('0.000001 * 1000000', '1'),
        ]
    )
    def test_multiplication_comprehensive(self, calculator, expression, expected):
        result = calculator.calculate(expression)
        assert str(result) == expected

    @pytest.mark.parametrize(
        'expression, expected',
        [
            # Простое деление
            ('10 / 2', '5'),
            ('9 / 3', '3'),
            ('1 / 2', '0.5'),
            ('-10 / 2', '-5'),
            ('-10 / -2', '5'),
            ('5 / 2', '2.5'),
            ('0 / 5', '0'),
            
            # Большие числа
            ('1000000 / 2', '500000'),
            ('999999999 / 3', '333333333'),
            ('1000000000 / 1000', '1000000'),
            ('123456789 / 1', '123456789'),
            
            # Деление десятичных дробей
            ('1 / 1000', '0.001'),
            ('0.001 / 0.001', '1'),
            ('123.456 / 10', '12.3456'),
            ('1000000 / 0.5', '2000000'),
            
            # Сложные случаи
            ('1 / 3', '0.3333333333'),
            ('22 / 7', '3.1428571429'),
            ('100 / 0.0001', '1000000'),

            ('5 / 0', 'Ошибка'),
            ('-23 / 0', 'Ошибка'),
            ('0.78493 / 0', 'Ошибка'),
            ('1 / 0', 'Ошибка'),
        ]
    )
    def test_division_comprehensive(self, calculator, expression, expected):
        result = calculator.calculate(expression)
        assert str(result) == expected
